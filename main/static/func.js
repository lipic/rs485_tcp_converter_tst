function showLoader(){document.getElementById("loader").style.display="unset"}function hideLoader(){document.getElementById("loader").style.display="none"}function resetClick(){updateSetting("reset",1)}function saveInverterClick(){updateSetting("inverter_type",document.getElementById("inverter_select").value)}function saveWifiClick(){updateWifi(document.getElementById("wifiSELECT").value,document.getElementById("wifiPWD").value)}function refreshWifiClick(){showLoader(),loadWifi("POST")}function updateSetting(e,t){showLoader(),fetch("/updateSetting",{method:"POST",body:JSON.stringify({variable:e,value:t})}).then(()=>{hideLoader()}).catch(e=>{console.error(e),alert(e),hideLoader()})}function automaticUpdateChanged(e){let t=1;!1===e.checked&&(t=0),updateSetting("automatic_update",t)}function updateWifi(e,t){showLoader(),fetch("/updateWifi",{method:"POST",body:JSON.stringify({ssid:e,password:t})}).then(()=>{hideLoader(),loadWifi("POST"),document.getElementById("wifiPWD").value="",alert("Updatovano")}).catch(e=>{console.error(e),alert(e),hideLoader()})}function refreshPage(){showLoader(),window.location.reload()}function loadWifi(e=""){showLoader(),fetch("/loadWifiSSID",{method:e.length>0?"POST":"GET"}).then(e=>e.json()).then(e=>{document.getElementById("SSID").innerHTML=e.connectSSID;let t=document.getElementById("wifiSELECT");for(let i in t.innerHTML="",e){if("connectSSID"===i||""===i)continue;let n=document.createElement("option");n.value=i,n.innerHTML=i,t.appendChild(n)}hideLoader()}).catch(e=>{console.error(e),alert(e),hideLoader()})}function loadSettings(){showLoader(),fetch("/loadSettings").then(e=>e.json()).then(e=>{console.log("settings: "+JSON.stringify(e)),document.getElementById("ACTUAL_SW_VERSION").innerHTML=e.actual_sw_version,document.getElementById("ERRORS").innerHTML=e.errors,document.getElementById("ID").innerHTML=e.id,document.getElementById("AUTOMATIC_UPDATE").checked="1"===e.automatic_update,loadWifi()}).catch(e=>{console.error(e),alert(e),hideLoader()})}function togglePasswordVisibility(){let e=document.getElementById("wifiPWD");document.getElementById("showPassword").checked?e.type="text":e.type="password"}